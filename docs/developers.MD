
# Information for Developers 

## Pre-requisites
* Python 3.5 or greater


## Background

This project is structured to facilitate development using a virtual environment in the folder `.env`.  The 
`.gitignore` file contains this folder, so it will be ignored by `git`.  Source code is contained in the `src` 
folder and tests are contained in `tests`.  For imports of code in `src` to work properly, developers must run
the setup script to create an *editable* installation of the code.  The dependencies listed in `requirements.txt`
must also be installed within the virtual environment.  


## Setup Process

These steps below must be executed once after a developer clones the repo.  All commands should be run in the root
folder (`hue_sms` unless it was renamed after cloning).

1. **Create a virtual environment in the folder `.env`**:  run `python3 -m venv .env`
2. **Activate the virtual environment**: `source .env/bin/activiate`
3. **Install dependencies**: `pip install -r requirements.txt`
4. **Install `hue_sms` source as an editable module**: `pip install -e .

## Steps for Running the Code

After the setup process, you must follow these steps in separate terminals to run the project.

1. **Run the createRedis.py in the first terminal by running** `python3 createRedis.py` this step only needs to be completed once.
2. **In a second terminal, run the redis server:** `redis-server`
3. **In a third terminal, run the flask server:** `python3 hue_flask.py`
4. **In a fourth terminal, run the demo:** `python3 demoVersion2.py` You must rerun this line of code each time.
5. **When finished, end the redis and the hue flask servers:** `Ctrl+C`


## Workflow - IDE

PyCharm is the preferred IDE, and the `.gitignore` file is configured to ignore the files auto-generated by
PyCharm (e.g. `.idea/`).  Developers should clone the repo **outside** of Python and perform the setup process (above) 
**before** opening the project in PyCharm.  If you open the project in PyCharm before doing these steps, PyCharm will 
use the default python installation instead of a virtual environment.  Developers can correct this by:

1. Close the project in PyCharm
2. Remove the `.idea/` folder
3. Re-open the project in Python

Before beginning work, developers should verify that the virtual environment is being used by PyCharm.  In the Project 
pane, open "External Libraries," and verify the entry for Python points to the correct virtual environment.

## Workflow - Command Line

A virtual environment is active until the `deactivate` script is executed or the terminal window is closed.  To
activate the virtual environment in a new terminal window, run the command `source .env/bin/activate` from the 
root of the project.

